(this.webpackJsonpreact_app3=this.webpackJsonpreact_app3||[]).push([[0],{46:function(e,t,a){e.exports=a(83)},51:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(42),i=a.n(c),s=(a(51),a(9)),o=a(10),l=a(12),m=a(11),u=a(14),d=a(7),p=(r.a.Component,function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"div_navigate_index"},r.a.createElement("div",{id:"div_head",className:"cover"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("a",{href:"./",className:"home_link"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-home"})))),r.a.createElement("div",{className:"col-sm-8"})))))}}]),a}(r.a.Component)),h=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"About"),r.a.createElement("hr",null),r.a.createElement("h3",null,"about, text"))}}]),a}(r.a.Component),_=a(18),g=a.n(_),f=a(24),v=a(22),b=a(44),E=a.n(b),y=a(45),k=a.n(y),w=function(e){if("undefined"!==typeof e.created_at){var t=k()(e.created_at.toDate());e.date_str=t.format("YYYY-MM-DD HH:mm")}return e},N={init:function(){this.per_page=20},set_per_page:function(e){this.per_page=e},get_page_start:function(e){return{start:(e-1)*this.per_page,limit:e*this.per_page}},get_per_page:function(){return console.log("per_page:",this.per_page),this.per_page},is_paging_display:function(e){var t=0;return e/this.per_page>=1&&(t=1),t},get_max_page:function(e,t){var a=0,n=e.length%t;return a=e.length/t,a=parseInt(a),n>0&&(a+=1),a},get_page_items:function(e,t,a){var n=[];return e.forEach((function(e,r){r>=t&&r<a&&n.push(e)})),n},get_items:function(e,t,a){var n=[],r=(t-1)*a,c=t*a;return e.forEach((function(e,t){t>=r&&t<c&&n.push(e)})),n},add_page_items:function(e,t){var a=e;return t.forEach((function(e){a.push(e)})),a}},j={get_bread_ids:function(e){try{var t=[];return e.forEach(function(){var e=Object(f.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.push(a.category_id);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t}catch(a){throw console.log(a),new Error("Error , get_bread_ids")}},get_page_items:function(){var e=Object(f.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],n=t.firestore(),r=(r=n.collection("cms_pages")).orderBy("created_at","desc"),e.next=7,r.get();case 7:return e.sent.forEach((function(e){var t=e.data();a.push({id:e.id,title:t.title,content:t.content,created_at:t.created_at})})),e.abrupt("return",a);case 12:throw e.prev=12,e.t0=e.catch(0),console.log(e.t0),new Error("Error , get_page_items");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),get_category_items:function(){var e=Object(f.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],n=t.firestore(),r=(r=n.collection("cms_category")).orderBy("created_at","desc"),e.next=7,r.get();case 7:return e.sent.forEach((function(e){var t=e.data();a.push({id:e.id,name:t.name,content:t.content,created_at:t.created_at})})),e.abrupt("return",a);case 12:throw e.prev=12,e.t0=e.catch(0),console.log(e.t0),new Error("Error , get_category_items");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),get_search_items:function(e,t){try{var a=[];return e.forEach((function(e){e.category_id===t&&a.push(e)})),a}catch(n){throw console.log(n),new Error("Error , get_post_items")}},get_post_items:function(e,t){try{var a=[];return e.forEach((function(e){e.category={name:""},t.forEach((function(t){e.category_id===t.id&&(e.category=t)})),a.push(e)})),a}catch(n){throw console.log(n),new Error("Error , get_post_items")}}},O=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"dispCategory",value:function(e){if(null!=e.category)return r.a.createElement("span",{className:"folder_icon_wrap mr-2"},r.a.createElement("i",{className:"fas fa-folder"})," ",e.category.name)}},{key:"render",value:function(){return r.a.createElement("div",{className:"post_items_wrap"},r.a.createElement("div",{className:"div_news_rows"},r.a.createElement(u.b,{to:"/show/".concat(this.props.obj.id)},r.a.createElement("h3",{className:"ml-10"}," ",this.props.obj.title))),r.a.createElement("div",null,r.a.createElement("ul",{className:"ul_time_box"},r.a.createElement("li",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("span",{className:"mr-2 time_icon_wrap"},r.a.createElement("i",{className:"far fa-calendar"})),this.props.obj.date_str),this.dispCategory(this.props.obj)))),r.a.createElement("hr",{className:"hr_ex1"}))}}]),a}(n.Component),C=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("span",null,r.a.createElement(u.b,{to:"/pages/".concat(this.props.obj.id),target:"_blank",className:"btn btn-outline-dark ml-2 mb-2"},this.props.obj.title))}}]),a}(n.Component),x=a(20),P=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={data:"",pages_display:1,items_all:[],page_max:1,pagenate_display:0},n.page=1,n.page_one_max=20,n.handleClickCategory=n.handleClickCategory.bind(Object(v.a)(n)),n.handleClickMenu=n.handleClickMenu.bind(Object(v.a)(n)),n.handleClickPagenate=n.handleClickPagenate.bind(Object(v.a)(n)),n.handleClickPagenateP1=n.handleClickPagenateP1.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.get_items()}},{key:"get_items",value:function(){var e=Object(f.a)(g.a.mark((function e(){var t,a,n,r,c,i,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.init(),t=N.get_page_start(this.page),console.log(t),a={},n=[],r=this,this.database=x.a.firestore(),c=(c=this.database.collection("cms_posts")).orderBy("created_at","desc").limit(t.limit),e.next=11,c.get();case 11:return e.sent.forEach((function(e){var t=e.data();t=w(t),n.push({id:e.id,category_id:t.category_id,title:t.title,content:t.content,created_at:t.created_at,date_str:t.date_str})})),e.next=15,j.get_category_items(x.a);case 15:return i=e.sent,a.category_items=i,n=N.get_page_items(n,t.start,t.limit),n=j.get_post_items(n,i),a.items=n,e.next=22,j.get_page_items(x.a);case 22:a.page_items=e.sent,s=N.is_paging_display(n.length),r.setState({data:a,pagenate_display:s});case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_category",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,x.a.firestore();case 3:return this.database=e.sent,e.next=6,this.database.collection("cms_posts").orderBy("created_at","desc").limit(1e3).get();case 6:e.sent.forEach((function(e){var t=e.data();t=w(t),a.push({id:e.id,category_id:t.category_id,title:t.title,content:t.content,created_at:t.created_at,date_str:t.date_str})})),n=this.state.data,r=j.get_search_items(a,t),r=j.get_post_items(r,n.category_items),n.items=r,console.log(n),this.setState({data:n,pagenate_display:0});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleClickCategory",value:function(e){this.get_category(e),console.log(e)}},{key:"handleClickMenu",value:function(){E()(".btn_hidden_ara_wrap").css("display","inherit")}},{key:"categoryRow",value:function(){if(this.state.data.category_items instanceof Array){var e=this;return this.state.data.category_items.map((function(t,a){return r.a.createElement("span",{key:a},r.a.createElement("button",{className:"btn btn-outline-dark ml-2 mb-2",onClick:e.handleClickCategory.bind(this,t.id)},t.name))}))}}},{key:"categoryDisp",value:function(){return r.a.createElement("div",{className:"category_wrap"},r.a.createElement("div",{className:"row conte mt-2 mb-4"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h2",{className:"h4_td_title mt-2"},"Category"),r.a.createElement("div",{className:"category_btn_wrap mb-0"},this.categoryRow()))))}},{key:"pageRow",value:function(){return this.state.data.page_items.map((function(e,t){return r.a.createElement(C,{obj:e,key:t})}))}},{key:"pageDisp",value:function(){if(this.state.data.page_items instanceof Array&&1===this.state.pages_display)return r.a.createElement("div",{className:"pages_wrap"},r.a.createElement("div",{className:"row conte mt-4 mb-2"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h2",{className:"h4_td_title mt-2"},"Pages"),r.a.createElement("div",{className:"page_btn_wrap mb-0"},this.pageRow()))))}},{key:"tabRow",value:function(){if(this.state.data.items instanceof Array)return this.state.data.items.map((function(e,t){return r.a.createElement(O,{obj:e,key:t})}))}},{key:"handleClickPagenateP1",value:function(){this.page=1,this.get_items()}},{key:"handleClickPagenate",value:function(){var e=this.page;this.page=e+1,console.log("page=",this.page),this.get_items()}},{key:"dispPagenate",value:function(){if(1===this.state.pagenate_display)return r.a.createElement("div",{className:"paginate_wrap"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},r.a.createElement("button",{onClick:this.handleClickPagenateP1,className:"btn btn-lg btn-outline-primary"},"1st"),r.a.createElement("button",{onClick:this.handleClickPagenate,className:"btn btn-lg btn-outline-primary"},">")))}},{key:"render",value:function(){return r.a.createElement("div",{className:"body_main_wrap"},r.a.createElement("div",{className:"main_title_wrap"},r.a.createElement("div",{id:"div_img_layer"},r.a.createElement("h1",null,"Sample CMS",r.a.createElement("br",null)),r.a.createElement("p",{className:"sub_title mt-2"},"sample\u30ad\u30e3\u30c3\u30c1\u30b3\u30d4\u30fc\u3068\u306a\u308a\u307e\u3059\u3002",r.a.createElement("br",null)))),r.a.createElement("div",{id:"div_menu_layer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"menu_icon_wrap ml-4"},r.a.createElement("a",{className:"menu_display_btn",onClick:this.handleClickMenu},r.a.createElement("i",{className:"fas fa-bars"}))))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"btn_hidden_ara_wrap"},this.pageDisp(),this.categoryDisp()),r.a.createElement("div",{className:"body_wrap"},r.a.createElement("div",{id:"post_items_box",className:"row conte mt-4 mb-4"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{id:"div_news"},r.a.createElement("h2",{className:"h4_td_title mt-2 mb-2"},"Post")),this.tabRow(),this.dispPagenate())))))}}]),a}(r.a.Component),D=(a(61),a(27)),M=a.n(D),B=(a(78),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={data:""},n.id="",n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.id=this.props.match.params.id,this.get_item(this.id),console.log(this.id)}},{key:"get_item",value:function(e){this.database=x.a.firestore();var t=this.database.collection("cms_posts").doc(e),a=this;t.get().then((function(e){var t=e.data();(t=w(t)).content=M()(t.content),console.log(t),a.setState({data:t})})).catch((function(e){console.log("Error getting document:",e)}))}},{key:"get_content",value:function(){return console.log("#-get_content"),!1}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(u.b,{to:"/",className:"btn btn-outline-primary mt-2"},"Back"),r.a.createElement("hr",{className:"mt-2 mb-2"}),r.a.createElement("div",{className:"show_head_wrap"},r.a.createElement("i",{className:"fas fa-home"})," >",this.state.data.title),r.a.createElement("hr",null),r.a.createElement("h1",null,this.state.data.title),"date :  ",this.state.data.date_str,r.a.createElement("br",null),"ID :  ",this.id,r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("div",{id:"post_item",dangerouslySetInnerHTML:{__html:this.state.data.content}}))}}]),a}(r.a.Component)),S=(a(79),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={data:""},n.id="",n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.id=this.props.match.params.id,console.log(this.id),this.get_item(this.id)}},{key:"get_item",value:function(e){this.database=x.a.firestore();var t=this.database.collection("cms_pages").doc(e),a=this;t.get().then((function(t){var n=t.data();(n=w(n)).id=e,n.content=M()(n.content),console.log(n),a.setState({data:n})})).catch((function(e){console.log("Error getting document:",e)}))}},{key:"get_content",value:function(){return console.log("#-get_content"),!1}},{key:"render",value:function(){return r.a.createElement("div",{className:"container mt-2"},r.a.createElement("div",{className:"page_head_wrap mt-2"},r.a.createElement("i",{className:"fas fa-home"})," > ",this.state.data.title),r.a.createElement("hr",null),r.a.createElement("h1",null,this.state.data.title),"date : ",this.state.data.date_str," ",r.a.createElement("br",null),"ID : ",this.state.data.id," ",r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("div",{id:"post_item",dangerouslySetInnerHTML:{__html:this.state.data.content}}))}}]),a}(r.a.Component)),I=(a(80),a(81),a(82),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement("div",null,r.a.createElement(p,null),r.a.createElement(d.a,{exact:!0,path:"/",component:P}),r.a.createElement(d.a,{path:"/show/:id",component:B}),r.a.createElement(d.a,{path:"/pages/:id",component:S}),r.a.createElement(d.a,{path:"/about",component:h}))))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));x.a.initializeApp({apiKey:"AIzaSyCEWHm9n33ayZ-_ktBFW_nE6Bis01_nXEA",authDomain:"spa1-project.firebaseapp.com",databaseURL:"https://spa1-project.firebaseio.com",projectId:"spa1-project",storageBucket:"spa1-project.appspot.com",messagingSenderId:"597018011814",appId:"1:597018011814:web:68e880a7483462f9512c67"}),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.0a33d827.chunk.js.map